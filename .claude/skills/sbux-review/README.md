# /sbux:review 使用指南

> 执行代码审查，验证需求实现、设计符合性、API 一致性和代码质量

## 工作流定位

```
开发流程：
  /sbux:proposal → /sbux:apply → [/sbux:review] → /sbux:git → /sbux:deploy → (/sbux:fix 循环)
                                      ↑
                                  当前位置
                                      │
                                      ├── 通过 → /sbux:git
                                      └── 不通过 → /sbux:fix
```

| 上游依赖 | 当前 Skill | 下游衔接 |
|----------|-----------|----------|
| /sbux:apply 实现的代码 | **/sbux:review** | 通过 → /sbux:git |
| 提案文档 | | 不通过 → /sbux:fix |

---

## 快速开始

### 前置条件

- `/sbux:apply` 已完成
- 代码可编译/构建

### 基本用法

```bash
# 审查最新提案
/sbux:review

# 指定提案
/sbux:review 001-user-register
```

---

## 最佳实践

1. **ERROR 必须修复** - 发现 ERROR 级别问题，必须修复后重新审查

2. **WARNING 可选修复** - 根据实际情况决定是否处理警告

3. **多次审查直到通过** - 修复问题后重新运行 /sbux:review，确保所有问题都已解决

4. **审查报告归档** - review-report.md 记录了所有检查结果，便于追溯

---

## 审查维度

| 维度 | 检查内容 | 规范文件 |
|------|---------|---------|
| 需求验证 | FR → 代码 → 测试 映射 | REQUIREMENTS-CHECK.md |
| 设计符合性 | 架构、模块、数据结构 | DESIGN-CHECK.md |
| API 一致性 | 路径、参数、响应 | API-CHECK.md |
| 代码质量 | 命名、结构、安全性 | CODE-QUALITY.md |

---

## 审查结果

| 级别 | 含义 | 处理方式 |
|------|------|---------|
| ERROR | 严重问题 | 必须修复 |
| WARNING | 潜在风险 | 建议修复 |
| INFO | 建议优化 | 可选处理 |

**判定规则**：
- 有 ERROR → 不通过，需修复
- 仅 WARNING → 有警告，可选修复
- 无错误 → 通过

---

## 输出产物

| 产物 | 位置 | 用途 |
|------|------|------|
| 审查报告 | `.proposal/{id}/review-report.md` | 完整检查结果 |

---

## 常见问题

| 问题 | 解决方案 |
|------|----------|
| ERROR 太多不知从何下手 | 按优先级处理：需求 > API > 设计 > 质量 |
| WARNING 是否必须处理 | 非强制，但建议处理以提高代码质量 |
| 审查结果与实际不符 | 可能是文档与代码不同步，更新文档或代码 |

---

## 下一步

审查完成后：

- **通过** → `/sbux:git commit` 提交代码
- **不通过** → `/sbux:fix` 修复问题，然后重新 `/sbux:review`
