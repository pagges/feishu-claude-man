# é€»è¾‘æ­£ç¡®æ€§æ£€æŸ¥è§„èŒƒ

æœ¬æ–‡æ¡£å®šä¹‰ç”¨ä¾‹é€»è¾‘æ­£ç¡®æ€§éªŒè¯çš„æ£€æŸ¥è§„åˆ™å’Œæ‰§è¡Œæ–¹æ³•ã€‚

---

## æ£€æŸ¥ç›®æ ‡

éªŒè¯ test_summary æè¿°ä¸å®é™…ä»£ç ï¼ˆbodyã€æ–­è¨€ï¼‰çš„ä¸€è‡´æ€§ã€‚

---

## è¾“å…¥æ–‡æ¡£

### cases.xlsx ç»“æ„

éœ€è¦æ£€æŸ¥çš„åˆ—ï¼š

| åˆ— | å­—æ®µ | è¯´æ˜ |
|----|------|------|
| H | test_summary | æµ‹è¯•è¦ç‚¹æè¿° |
| O | body | è¯·æ±‚ä½“ |
| P | assert_json | JSON æ–­è¨€ |

---

## ä¸€ã€test_summary è§£æ

### æè¿°æ¨¡å¼è¯†åˆ«

ä» test_summary ä¸­æå–å…³é”®ä¿¡æ¯ï¼š

#### åœºæ™¯ç±»å‹

| å…³é”®è¯ | åœºæ™¯ç±»å‹ |
|--------|----------|
| æ­£å¸¸ã€æˆåŠŸã€æœ‰æ•ˆ | æ­£å¸¸åœºæ™¯ |
| ç¼ºå¤±ã€ä¸ºç©ºã€nullã€é”™è¯¯ã€å¼‚å¸¸ | å¼‚å¸¸åœºæ™¯ |

#### æ“ä½œç±»å‹

| å…³é”®è¯ | æ“ä½œç±»å‹ | body é¢„æœŸå˜åŒ– |
|--------|----------|---------------|
| ç¼ºå¤±ã€ä¸ä¼ ã€åˆ é™¤ | å­—æ®µåˆ é™¤ | å­—æ®µä¸å­˜åœ¨ |
| ä¸ºç©ºã€ç©ºå€¼ã€ç©ºå­—ç¬¦ä¸² | ç©ºå€¼ | å­—æ®µå€¼ä¸º "" |
| ä¸º nullã€null å€¼ | null å€¼ | å­—æ®µå€¼ä¸º null |
| ç±»å‹é”™è¯¯ã€æ ¼å¼é”™è¯¯ | ç±»å‹é”™è¯¯ | å­—æ®µç±»å‹ä¸ç¬¦ |
| è¶…é•¿ã€è¶…çŸ­ã€è¾¹ç•Œã€æœ€å¤§ã€æœ€å° | è¾¹ç•Œå€¼ | è¾¹ç•Œå€¼æ•°æ® |

#### ç›®æ ‡å­—æ®µæå–

ä» test_summary ä¸­æå–ç›®æ ‡å­—æ®µåï¼š

```
"å‚æ•° orderId ç¼ºå¤±" â†’ ç›®æ ‡å­—æ®µ: orderId
"æ‰‹æœºå·æ ¼å¼é”™è¯¯" â†’ ç›®æ ‡å­—æ®µ: phone/mobile
"é‡‘é¢è¶…è¿‡æœ€å¤§å€¼" â†’ ç›®æ ‡å­—æ®µ: amount
```

---

## äºŒã€é€»è¾‘éªŒè¯è§„åˆ™

### è§„åˆ™è¡¨

| test_summary æè¿° | body é¢„æœŸ | æ–­è¨€é¢„æœŸ | éªŒè¯é€»è¾‘ |
|-------------------|-----------|----------|----------|
| å‚æ•° X ç¼ºå¤± | X å­—æ®µä¸å­˜åœ¨ | é”™è¯¯ç  | body ä¸­ä¸åŒ…å« X |
| å‚æ•° X ä¸ºç©º | X = "" | é”™è¯¯ç  | body.X === "" |
| å‚æ•° X ä¸º null | X = null | é”™è¯¯ç  | body.X === null |
| å‚æ•° X ç±»å‹é”™è¯¯ | X ç±»å‹ä¸ç¬¦ | é”™è¯¯ç  | typeof body.X ä¸é¢„æœŸä¸ç¬¦ |
| å‚æ•° X è¶…é•¿ | X é•¿åº¦è¶…é™ | é”™è¯¯ç  | body.X.length > é™åˆ¶å€¼ |
| æ­£å¸¸åœºæ™¯ | æœ‰æ•ˆå€¼ | æˆåŠŸç  | æ‰€æœ‰å¿…å¡«å­—æ®µå­˜åœ¨ä¸”æœ‰æ•ˆ |

### æ£€æŸ¥æ–¹æ³•

å¯¹äºæ¯ä¸ªå¾…å®¡æŸ¥ç”¨ä¾‹ï¼š

```python
def check_logic(test_summary, body, assert_json):
    # 1. è§£æ test_summary
    scenario_type = extract_scenario_type(test_summary)
    operation_type = extract_operation_type(test_summary)
    target_field = extract_target_field(test_summary)

    # 2. éªŒè¯ body
    if operation_type == "ç¼ºå¤±":
        if target_field in body:
            return ERROR("å­—æ®µåº”è¯¥ç¼ºå¤±ä½†å­˜åœ¨")
    elif operation_type == "ä¸ºç©º":
        if body.get(target_field) != "":
            return ERROR("å­—æ®µåº”è¯¥ä¸ºç©ºä½†ä¸ä¸ºç©º")
    elif operation_type == "ä¸ºnull":
        if body.get(target_field) is not None:
            return ERROR("å­—æ®µåº”è¯¥ä¸ºnullä½†ä¸ä¸ºnull")

    # 3. éªŒè¯æ–­è¨€
    status_code = extract_status_code(assert_json)
    if scenario_type == "å¼‚å¸¸" and is_success_code(status_code):
        return WARNING("å¼‚å¸¸åœºæ™¯ä½†æ–­è¨€æˆåŠŸç ")
    if scenario_type == "æ­£å¸¸" and not is_success_code(status_code):
        return WARNING("æ­£å¸¸åœºæ™¯ä½†æ–­è¨€é”™è¯¯ç ")

    return PASS
```

---

## ä¸‰ã€é—®é¢˜ç±»å‹

### ERROR çº§åˆ«ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

| é—®é¢˜ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| å­—æ®µåº”ç¼ºå¤±ä½†å­˜åœ¨ | test_summary è¯´ç¼ºå¤±ï¼Œbody ä¸­å´æœ‰ | "orderId ç¼ºå¤±" ä½† body.orderId å­˜åœ¨ |
| å­—æ®µåº”ä¸ºç©ºä½†æœ‰å€¼ | test_summary è¯´ä¸ºç©ºï¼Œbody ä¸­æœ‰å€¼ | "name ä¸ºç©º" ä½† body.name = "test" |
| å­—æ®µåº”ä¸º null ä½†ä¸ä¸º null | test_summary è¯´ nullï¼Œbody ä¸­ä¸æ˜¯ | "amount ä¸º null" ä½† body.amount = 0 |

### WARNING çº§åˆ«ï¼ˆå»ºè®®ä¿®å¤ï¼‰

| é—®é¢˜ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| æ–­è¨€ä¸åœºæ™¯ä¸åŒ¹é… | å¼‚å¸¸åœºæ™¯ä½¿ç”¨æˆåŠŸç  | "å‚æ•°ç¼ºå¤±" ä½† statusCode=100 |
| æ— æ³•è§£æç›®æ ‡å­—æ®µ | test_summary ä¸­æ— æ³•æå–å­—æ®µå | "å‚æ•°é”™è¯¯" æœªæŒ‡æ˜å“ªä¸ªå‚æ•° |

### INFO çº§åˆ«ï¼ˆä¾›å‚è€ƒï¼‰

| é—®é¢˜ | è¯´æ˜ |
|------|------|
| æ— æ³•åˆ¤æ–­åœºæ™¯ç±»å‹ | test_summary æè¿°ä¸å¤Ÿæ˜ç¡® |
| å¤æ‚åœºæ™¯æ— æ³•è‡ªåŠ¨éªŒè¯ | å¤šæ¡ä»¶ç»„åˆåœºæ™¯ |

---

## å››ã€è¾“å‡ºæ ¼å¼

### é€šè¿‡

```
ğŸ” é€»è¾‘æ­£ç¡®æ€§æ£€æŸ¥
â”œâ”€â”€ å·²æ£€æŸ¥ç”¨ä¾‹: 10 ä¸ª
â”œâ”€â”€ é€»è¾‘æ­£ç¡®: 10 ä¸ª
â”œâ”€â”€ é€»è¾‘é”™è¯¯: 0 ä¸ª
â””â”€â”€ çŠ¶æ€: âœ… é€šè¿‡
```

### æœ‰é”™è¯¯

```
ğŸ” é€»è¾‘æ­£ç¡®æ€§æ£€æŸ¥
â”œâ”€â”€ å·²æ£€æŸ¥ç”¨ä¾‹: 10 ä¸ª
â”œâ”€â”€ é€»è¾‘æ­£ç¡®: 7 ä¸ª
â”œâ”€â”€ é€»è¾‘é”™è¯¯: 3 ä¸ª
â”‚   â”œâ”€â”€ ç”¨ä¾‹ #3: test_summary "orderId ç¼ºå¤±" ä½† body ä¸­å­˜åœ¨ orderId
â”‚   â”œâ”€â”€ ç”¨ä¾‹ #5: test_summary "name ä¸ºç©º" ä½† body.name = "test"
â”‚   â””â”€â”€ ç”¨ä¾‹ #8: test_summary "æ­£å¸¸ä¸‹å•" ä½† body ç¼ºå°‘å¿…å¡«å­—æ®µ
â””â”€â”€ çŠ¶æ€: âŒ å¤±è´¥
```

---

## äº”ã€ç‰¹æ®Šæƒ…å†µ

### å¤æ‚ test_summary

æŸäº› test_summary å¯èƒ½æè¿°å¤šä¸ªæ¡ä»¶ï¼š

```
"orderId ç¼ºå¤±ä¸” name ä¸ºç©º"
```

å¤„ç†æ–¹å¼ï¼š
1. åˆ†åˆ«æå–å¤šä¸ªæ¡ä»¶
2. é€ä¸ªéªŒè¯
3. åªè¦æœ‰ä¸€ä¸ªä¸æ»¡è¶³å°±æŠ¥é”™

### åµŒå¥—å­—æ®µ

å¯¹äºåµŒå¥—å¯¹è±¡ä¸­çš„å­—æ®µï¼š

```
test_summary: "userInfo.phone æ ¼å¼é”™è¯¯"
body: {"userInfo": {"phone": "invalid"}}
```

ä½¿ç”¨è·¯å¾„è¡¨è¾¾å¼è®¿é—®åµŒå¥—å­—æ®µã€‚

### æ¨¡ç³Šæè¿°

æŸäº› test_summary å¯èƒ½æè¿°ä¸å¤Ÿç²¾ç¡®ï¼š

```
"å¼‚å¸¸å‚æ•°æµ‹è¯•"  // æ²¡æœ‰æŒ‡æ˜å…·ä½“å‚æ•°
"è¾¹ç•Œå€¼æµ‹è¯•"    // æ²¡æœ‰æŒ‡æ˜å…·ä½“è¾¹ç•Œ
```

å¤„ç†æ–¹å¼ï¼š
1. æ ‡è®°ä¸º INFO çº§åˆ«
2. æç¤º"å»ºè®®æ˜ç¡® test_summary æè¿°"
