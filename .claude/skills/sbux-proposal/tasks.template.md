# 任务清单：{{FEATURE_NAME}}

> 生成时间: {{TIMESTAMP}}
> 状态: [待开始/进行中/已完成]
> 项目类型: {{PROJECT_TYPE}}
> 关联文档:
> - [需求](./1-requirements.md)
> - [设计](./2-design.md)
> - [API](./3-api-spec.md)
> - [测试用例](./4-test-cases.md)

---

## 进度总览

| 阶段 | 批次 | 总任务 | 已完成 | 进度 |
|------|------|--------|--------|------|
| 编码 | {{CODING_BATCH_COUNT}} | {{CODING_TASK_TOTAL}} | 0 | 0% |
| 测试 | {{TEST_BATCH_COUNT}} | {{TEST_TASK_TOTAL}} | 0 | 0% |
| 验证 | - | {{VERIFY_TOTAL}} | 0 | 0% |

---

## 一、编码任务

<!--
批次由系统自动设计，遵循以下原则：
1. 批次间单向依赖：Batch-N 只能依赖 Batch-1 ~ Batch-(N-1)
2. 无循环依赖：任务依赖图必须是 DAG
3. 最小批次数：满足依赖约束的前提下，尽量减少批次数量
4. 批次内顺序执行：同批次内有依赖的任务按依赖顺序排列
5. 适当拆分批次：同一批次内修改的文件不宜过多，避免上下文太长导致遗漏
-->

### Batch-1

| ID | 任务 | 文件路径 | 依赖 | 状态 | 备注 |
|----|------|----------|------|------|------|
| C-1 | {{TASK}} | `{{FILE}}` | - | [ ] | |
| C-2 | {{TASK}} | `{{FILE}}` | - | [ ] | |

### Batch-2

| ID | 任务 | 文件路径 | 依赖 | 状态 | 备注 |
|----|------|----------|------|------|------|
| C-3 | {{TASK}} | `{{FILE}}` | C-1 | [ ] | |
| C-4 | {{TASK}} | `{{FILE}}` | C-2 | [ ] | |

### Batch-3

| ID | 任务 | 文件路径 | 依赖 | 状态 | 备注 |
|----|------|----------|------|------|------|
| C-5 | {{TASK}} | `{{FILE}}` | C-3, C-4 | [ ] | |

### Batch-N

...（根据依赖深度动态生成批次数量）

---

## 二、测试任务

<!--
测试阶段在编码阶段全部完成后执行。
测试任务之间的依赖仅记录 T-* 之间的依赖关系。
-->

### Batch-1

| ID | 任务 | 文件路径 | 依赖 | 状态 | 覆盖用例 |
|----|------|----------|------|------|----------|
| T-1 | {{TASK}} | `{{FILE}}` | - | [ ] | IT-01~03 |

### Batch-2

| ID | 任务 | 文件路径 | 依赖 | 状态 | 覆盖用例 |
|----|------|----------|------|------|----------|
| T-2 | {{TASK}} | `{{FILE}}` | T-1 | [ ] | AT-01~04 |

### Batch-N

...（根据依赖深度动态生成批次数量）

---

## 三、验证任务

| ID | 任务 | 命令 | 依赖 | 状态 | 结果 |
|----|------|------|------|------|------|
| V-1 | 构建检查 | `{{BUILD_COMMAND}}` | 所有 C-* | [ ] | |
| V-2 | 集成测试 | `{{IT_COMMAND}}` | 所有 T-*(IT) | [ ] | |
| V-3 | 接口测试 | `{{AT_COMMAND}}` | 所有 T-*(AT) | [ ] | |
| V-4 | 全量测试 | `{{FULL_TEST_COMMAND}}` | V-2, V-3 | [ ] | |

<!--
验证命令参考：

【Java/Maven】
- 构建: mvn compile
- 集成测试: mvn test -Dtest=*ServiceTest
- 接口测试: mvn test -Dtest=*ControllerTest
- 全量: mvn test

【Python/pip】
- 构建: python -m py_compile xxx.py
- 测试: pytest tests/ -v

【Node/npm】
- 构建: npm run build
- 集成测试: npm run test:unit
- 接口测试: npm run test:api
- 全量: npm test

【Go】
- 构建: go build ./...
- 测试: go test ./...
-->

---

## 四、任务依赖图

```
编码阶段（按批次执行）:
┌─────────────────────────────────────┐
│ Batch-1 (C-1, C-2)                  │
│     │                               │
│     ▼                               │
│ Batch-2 (C-3, C-4)                  │
│     │                               │
│     ▼                               │
│ Batch-3 (C-5)                       │
│     │                               │
│     ▼                               │
│ Batch-N ...                         │
└─────────────────────────────────────┘
    │
    ▼
测试阶段（按批次执行）:
┌─────────────────────────────────────┐
│ Batch-1 (T-1)                       │
│     │                               │
│     ▼                               │
│ Batch-2 (T-2)                       │
│     │                               │
│     ▼                               │
│ Batch-N ...                         │
└─────────────────────────────────────┘
    │
    ▼
验证阶段:
└── V-1 → V-2 → V-3 → V-4
```

<!--
执行说明：
- 编码阶段：每个 Batch 由一个 SubAgent 执行，Batch 间顺序执行
- 测试阶段：编码全部完成后开始，每个 Batch 由一个 SubAgent 执行
- 验证阶段：测试全部完成后开始
- 如果某个 Batch 失败，后续不会执行
-->

---

## 五、执行日志

### {{DATE}}

| 时间 | 任务 | 操作 | 结果 |
|------|------|------|------|
| {{TIME}} | {{TASK_ID}} | {{ACTION}} | {{RESULT}} |

---

## 六、问题记录

| ID | 问题描述 | 发现时间 | 状态 | 解决方案 |
|----|----------|----------|------|----------|
| P-1 | {{ISSUE_DESC}} | {{TIME}} | [待解决/已解决] | {{SOLUTION}} |

---

## 变更历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| 0.1 | {{TIMESTAMP}} | 初始版本 | AI |
